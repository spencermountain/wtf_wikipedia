!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).wtfDisambig=t()}(this,(function(){"use strict";const e=/see also/;function t(e){return e=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),new RegExp(e,"i")}function i(e){let t=e.title()||"";return t=t.replace(/ \(disambig|disambiguation\)$/,""),t}return function(n){n.Doc.prototype.disambiguation=function(){if(!0!==this.isDisambiguation())return null;let n=this.section("see also");null!==n&&n.remove();let l=function(e){let i=e.text().slice(0,120);if(!i.match(/ is /))return null;let n=e.link(0);if(!n)return null;let l=t(n.text()),o=i.match(l);return!o||o.index>20?null:n.page()}(this.section().sentence()),o=[];return this.sections().forEach((i=>{let n=i.title();!0!==e.test(n)&&i.lists().forEach((e=>{e.lines().forEach((e=>{let i=function(e){let i=e.link(0);if(!i||"internal"!==i.type())return null;let n=e.text(),l=t(i.text()),o=n.match(l);return!o||o.index>20?null:(n=n.replace(l,""),n=n.replace(/[,:]? ?/,""),{link:i.page(),desc:n})}(e);i&&(i.section=n,o.push(i))}))}))})),{text:i(this),main:l,pages:o}},n.Doc.prototype.disambig=n.Doc.prototype.disambiguation}}));
