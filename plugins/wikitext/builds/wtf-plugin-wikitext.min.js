!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).wtfWikitext=e()}(this,(function(){"use strict";const t={images:!0,tables:!0,templates:!0,infoboxes:!0,categories:!0,lists:!0,links:!0,paragraphs:!0};function e(e){e=e||{},e=Object.assign({},t,e);let i="";if(!0===this.isRedirect())return`#REDIRECT [[${this.redirectTo().page}]]`;if(!0===e.infoboxes&&(i+=this.infoboxes().map((t=>t.makeWikitext(e))).join("\n")),!0===e.sections||!0===e.paragraphs||!0===e.sentences){let t=this.sections();i+=t.map((t=>t.makeWikitext(e))).join("\n")}return!0===e.categories&&(i+="\n",this.categories().forEach((t=>i+=`\n[[Category: ${t}]]`))),i}const i={};function n(t){t=t||{},t=Object.assign({},i,t);let e="";if(this.title()){let t="==";e+=`\n${t} ${this.title()} ${t}\n`}return!0===t.templates&&this.templates().forEach((t=>{e+=function(t){let e="",i=t.template;return Object.keys(t).forEach((i=>{"template"!==i&&(e+=` | ${i} = ${t[i]}`)})),`{{${i}${e}}} `}(t.json())+"\n"})),!0===t.tables&&(e+=this.tables().map((e=>e.makeWikitext(t))).join("\n")),!0===t.lists&&(e+=this.lists().map((e=>e.text(t))).join("\n")),e+=this.paragraphs().map((e=>e.makeWikitext(t))).join("\n"),this.references().forEach((i=>{e+=i.makeWikitext(t)+"\n"})),e}const a={};function s(t){t=t||{},t=Object.assign({},a,t);let e="";return this.images().forEach((t=>{e+=t.makeWikitext()})),this.lists().forEach((t=>{e+=t.makeWikitext()})),e+=this.sentences().map((e=>e.makeWikitext(t))).join("\n"),e}function o(t,e,i){if(!e||!t)return t;"number"==typeof t&&(t=String(t)),e=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");let n=new RegExp("\\b"+e+"\\b");return t=!0===n.test(t)?t.replace(n,i):t.replace(e,i)}const r={links:!0};function c(t){t=t||{},t=Object.assign({},r,t);let e=this.text();return!0===t.links&&this.links().forEach((t=>{let i=t.text()||t.page(),n=t.makeWikitext();e=o(e,i,n)})),!0===t.formatting&&(this.bold().forEach((t=>{e=o(e,t,"**"+t+"**")})),this.italic().forEach((t=>{e=o(e,t,"***"+t+"***")}))),e}function h(){if(this.site())return this.text()?`[${this.site()}|${this.text()}]`:`[${this.site()}]`;let t=this.page()||"";this.anchor()&&(t+="#"+this.anchor());let e=this.text()||"";return e&&e.toLowerCase()!==t.toLowerCase()?`[[${t}|${e}]]`:`[[${t}]]`}function f(){let t=`[[${this.file()}|thumb`;return this.data.caption&&(t+="|"+this.data.caption.wikitext()),t+"]]"}function l(){let t="{{"+(this.data.template||"");return Object.keys(this.data).forEach((e=>{if("template"===e)return;let i=this.data[e];i&&(t+=`| ${e} = ${i||""}`)})),t+="}}\n",t}function p(){let t=`{{Infobox ${this._type||""}\n`;return Object.keys(this.data).forEach((e=>{let i=this.data[e];i&&(t+=`| ${e} = ${i.wikitext()||""}\n`)})),t+="}}\n",t}function k(){let t="";return this.lines().forEach((e=>{t+=`* ${e.wikitext()}\n`})),t}function m(){if(this.data.inline)return`<ref>${this.data.inline.wikitext()}</ref>`;let t=this.data.type||"cite web",e="";return Object.keys(this.data).forEach((t=>{"template"!==t&&"type"!==t&&(e+=` | ${t} = ${this.data[t]}`)})),`<ref>{{${t}${e}}}</ref>`}function u(t){let e=this.data,i='{| class="wikitable"\n',n=Object.keys(e[0]);return n=n.filter((t=>!0!==/^col[0-9]/.test(t))),n.length>0&&(i+="|-\n",n.forEach((t=>{i+="! "+t+"\n"}))),e.forEach((e=>{i+="|-\n",Object.keys(e).forEach((n=>{let a=e[n].wikitext(t);i+="| "+a+"\n"}))})),i+="|}",i}return function(t){t.Doc.prototype.makeWikitext=e,t.Section.prototype.makeWikitext=n,t.Paragraph.prototype.makeWikitext=s,t.Sentence.prototype.makeWikitext=c,t.Link.prototype.makeWikitext=h,t.Image.prototype.makeWikitext=f,t.Infobox.prototype.makeWikitext=p,t.Template.prototype.makeWikitext=l,t.Table.prototype.makeWikitext=u,t.List.prototype.makeWikitext=k,t.Reference.prototype.makeWikitext=m}}));
