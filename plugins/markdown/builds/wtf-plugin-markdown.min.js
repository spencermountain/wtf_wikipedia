!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).wtfMarkdown=e()}(this,(function(){"use strict";const t={redirects:!0,infoboxes:!0,templates:!0,sections:!0};function e(e){let n=this,i="";return!0===(e=Object.assign({},t,e)).redirects&&!0===this.isRedirect()?function(t){let e=t.redirectTo(),n=e.page;return n="./"+n.replace(/ /g,"_"),e.anchor&&(n+="#"+e.anchor),`↳ [${e.text}](${n})`}(this):(!0===e.infoboxes&&!0===e.templates&&(i+=this.infoboxes().map((t=>t.markdown(e))).join("\n\n")),!0!==e.sections&&!0!==e.paragraphs&&!0!==e.sentences||(i+=n.sections().map((t=>t.markdown(e))).join("\n\n")),!0===e.references&&(i+="## References",i+=this.citations().map((t=>t.json(e))).join("\n")),i)}const n={headers:!0,images:!0,tables:!0,lists:!0,paragraphs:!0};function i(t){let e="";if(!0===(t=Object.assign({},n,t)).headers&&this.title()){let t="##";for(let e=0;e<this.depth();e+=1)t+="#";e+=t+" "+this.title()+"\n"}if(!0===t.images){let t=this.images();t.length>0&&(e+=t.map((t=>t.markdown())).join("\n"),e+="\n")}if(!0===t.tables){let n=this.tables();n.length>0&&(e+="\n",e+=n.map((e=>e.markdown(t))).join("\n"),e+="\n")}if(!0===t.lists){let n=this.lists();n.length>0&&(e+=n.map((e=>e.markdown(t))).join("\n"),e+="\n")}return!0!==t.paragraphs&&!0!==t.sentences||(e+=this.paragraphs().map((e=>e.sentences().map((e=>e.markdown(t))).join(" "))).join("\n\n")),e}const a={sentences:!0};function s(t){let e="";return!0===(t=Object.assign({},a,t)).sentences&&(e+=this.sentences().reduce(((e,n)=>e+=n.markdown(t)+"\n"),{})),e}function r(t,e,n){if(!e||!t)return t;"number"==typeof t&&(t=String(t)),e=e.replace(/[\-[\]/{}()*+?.\\^$|]/g,"\\$&");let i=new RegExp("\\b"+e+"\\b");return t=!0===i.test(t)?t.replace(i,n):t.replace(e,n)}const o={links:!0,formatting:!0};function l(t){t=Object.assign({},o,t);let e=this.text();return!0===t.links&&this.links().forEach((t=>{let n=t.markdown(),i=t.text()||t.page();e=r(e,i,n)})),!0===t.formatting&&(this.bolds().forEach((t=>{e=r(e,t,"**"+t+"**")})),this.italics().forEach((t=>{e=r(e,t,"*"+t+"*")}))),e}function c(){let t=this.href();return t=t.replace(/ /g,"_"),"["+(this.text()||this.page())+"]("+t+")"}function h(){let t=this.data.file.replace(/^(file|image):/i,"");return t=t.replace(/\.(jpg|jpeg|png|gif|svg)/i,"").split("_").join(" "),"!["+t+"]("+this.thumbnail()+")"}function p(t,e){t=t||"";let n=(e=e||15)-(t=String(t)).length;n=Math.ceil(n/2);for(let i=0;i<n;i+=1)(t=" "+t).length<e&&(t+=" ");return t}const d={image:!0,caption:!0,alt:!0,signature:!0,"signature alt":!0},f={images:!0};function u(t){t=Object.assign({},f,t);let e="|"+p("",35)+"|"+p("",30)+"|\n";return e+="|"+p("---",35)+"|"+p("---",30)+"|\n",Object.keys(this.data).forEach((n=>{if(!0===d[n])return;let i="**"+n+"**",a=this.data[n].markdown(t);a=a.split(/\n/g).join(", "),e+="|"+p(i,35)+"|"+p(a,30)+" |\n"})),e}function m(t){return this.lines().map((e=>" * "+e.markdown(t))).join("\n")}function g(){if(this.data&&this.data.url&&this.data.title)return`⌃ [${this.data.title}](${this.data.url})`;if(this.data.encyclopedia)return"⌃ "+this.data.encyclopedia;if(this.data.title){let t=this.data.title;return this.data.author&&(t+=this.data.author),this.data.first&&this.data.last&&(t+=this.data.first+" "+this.data.last),"⌃ "+t}return this.inline?"⌃ "+this.inline.markdown():""}function k(t){return"| "+(t=t.map((t=>p(t,14)))).join(" | ")+" |"}function w(t){let e="";if(!this||0===this.length)return e;let n=this.data,i=Object.keys(n[0]),a=i.map((t=>!0===/^col[0-9]/.test(t)?"":t));return e+=k(a)+"\n",e+=k(a.map((()=>"---")))+"\n",e+=n.map((e=>k(i.map((n=>e[n]&&e[n].markdown(t)||""))))).join("\n"),e+"\n"}return function(t){t.Doc.prototype.markdown=e,t.Section.prototype.markdown=i,t.Paragraph.prototype.markdown=s,t.Sentence.prototype.markdown=l,t.Link.prototype.markdown=c,t.Image.prototype.markdown=h,t.Infobox.prototype.markdown=u,t.Table.prototype.markdown=w,t.List.prototype.markdown=m,t.Reference.prototype.markdown=g}}));
